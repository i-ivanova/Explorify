{"ast":null,"code":"var _jsxFileName = \"/home/iivanova/Desktop/UBC_2021_2022/CPSC547_information_visualization/project/explorify/src/calendar-heatmap/index.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport memoizeOne from 'memoize-one';\nimport { DAYS_IN_WEEK, MILLISECONDS_IN_ONE_DAY, DAY_LABELS, MONTH_LABELS } from './constants';\nimport { dateNDaysAgo, shiftDate, getBeginningTimeForDate, convertToDate, getRange } from './helpers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SQUARE_SIZE = 13;\nconst MONTH_LABEL_GUTTER_SIZE = 4;\nconst CSS_PSEDUO_NAMESPACE = 'react-calendar-heatmap-';\n\nclass CalendarHeatmap extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.getValueCache = memoizeOne(props => props.values.reduce((memo, value) => {\n      const date = convertToDate(value.date);\n      const index = Math.floor((date - this.getStartDateWithEmptyDays()) / MILLISECONDS_IN_ONE_DAY); // eslint-disable-next-line no-param-reassign\n\n      memo[index] = {\n        value,\n        className: this.props.classForValue(value),\n        title: this.props.titleForValue ? this.props.titleForValue(value) : null,\n        tooltipDataAttrs: this.getTooltipDataAttrsForValue(value)\n      };\n      return memo;\n    }, {}));\n  }\n\n  getDateDifferenceInDays() {\n    const {\n      startDate,\n      numDays\n    } = this.props;\n\n    if (numDays) {\n      // eslint-disable-next-line no-console\n      console.warn('numDays is a deprecated prop. It will be removed in the next release. Consider using the startDate prop instead.');\n      return numDays;\n    }\n\n    const timeDiff = this.getEndDate() - convertToDate(startDate);\n    return Math.ceil(timeDiff / MILLISECONDS_IN_ONE_DAY);\n  }\n\n  getSquareSizeWithGutter() {\n    return SQUARE_SIZE + this.props.gutterSize;\n  }\n\n  getMonthLabelSize() {\n    if (!this.props.showMonthLabels) {\n      return 0;\n    }\n\n    if (this.props.horizontal) {\n      return SQUARE_SIZE + MONTH_LABEL_GUTTER_SIZE;\n    }\n\n    return 2 * (SQUARE_SIZE + MONTH_LABEL_GUTTER_SIZE);\n  }\n\n  getWeekdayLabelSize() {\n    if (!this.props.showWeekdayLabels) {\n      return 0;\n    }\n\n    if (this.props.horizontal) {\n      return 30;\n    }\n\n    return SQUARE_SIZE * 1.5;\n  }\n\n  getStartDate() {\n    return shiftDate(this.getEndDate(), -this.getDateDifferenceInDays() + 1); // +1 because endDate is inclusive\n  }\n\n  getEndDate() {\n    return getBeginningTimeForDate(convertToDate(this.props.endDate));\n  }\n\n  getStartDateWithEmptyDays() {\n    return shiftDate(this.getStartDate(), -this.getNumEmptyDaysAtStart());\n  }\n\n  getNumEmptyDaysAtStart() {\n    return this.getStartDate().getDay();\n  }\n\n  getNumEmptyDaysAtEnd() {\n    return DAYS_IN_WEEK - 1 - this.getEndDate().getDay();\n  }\n\n  getWeekCount() {\n    const numDaysRoundedToWeek = this.getDateDifferenceInDays() + this.getNumEmptyDaysAtStart() + this.getNumEmptyDaysAtEnd();\n    return Math.ceil(numDaysRoundedToWeek / DAYS_IN_WEEK);\n  }\n\n  getWeekWidth() {\n    return DAYS_IN_WEEK * this.getSquareSizeWithGutter();\n  }\n\n  getWidth() {\n    return this.getWeekCount() * this.getSquareSizeWithGutter() - (this.props.gutterSize - this.getWeekdayLabelSize());\n  }\n\n  getHeight() {\n    return this.getWeekWidth() + (this.getMonthLabelSize() - this.props.gutterSize) + this.getWeekdayLabelSize();\n  }\n\n  getValueForIndex(index) {\n    if (this.valueCache[index]) {\n      return this.valueCache[index].value;\n    }\n\n    return null;\n  }\n\n  getClassNameForIndex(index) {\n    if (this.valueCache[index]) {\n      return this.valueCache[index].className;\n    }\n\n    return this.props.classForValue(null);\n  }\n\n  getTitleForIndex(index) {\n    if (this.valueCache[index]) {\n      return this.valueCache[index].title;\n    }\n\n    return this.props.titleForValue ? this.props.titleForValue(null) : null;\n  }\n\n  getTooltipDataAttrsForIndex(index) {\n    if (this.valueCache[index]) {\n      return this.valueCache[index].tooltipDataAttrs;\n    }\n\n    return this.getTooltipDataAttrsForValue({\n      date: null,\n      count: null\n    });\n  }\n\n  getTooltipDataAttrsForValue(value) {\n    const {\n      tooltipDataAttrs\n    } = this.props;\n\n    if (typeof tooltipDataAttrs === 'function') {\n      return tooltipDataAttrs(value);\n    }\n\n    return tooltipDataAttrs;\n  }\n\n  getTransformForWeek(weekIndex) {\n    if (this.props.horizontal) {\n      return `translate(${weekIndex * this.getSquareSizeWithGutter()}, 0)`;\n    }\n\n    return `translate(0, ${weekIndex * this.getSquareSizeWithGutter()})`;\n  }\n\n  getTransformForWeekdayLabels() {\n    if (this.props.horizontal) {\n      return `translate(${SQUARE_SIZE}, ${this.getMonthLabelSize()})`;\n    }\n\n    return null;\n  }\n\n  getTransformForMonthLabels() {\n    if (this.props.horizontal) {\n      return `translate(${this.getWeekdayLabelSize()}, 0)`;\n    }\n\n    return `translate(${this.getWeekWidth() + MONTH_LABEL_GUTTER_SIZE}, ${this.getWeekdayLabelSize()})`;\n  }\n\n  getTransformForAllWeeks() {\n    if (this.props.horizontal) {\n      return `translate(${this.getWeekdayLabelSize()}, ${this.getMonthLabelSize()})`;\n    }\n\n    return `translate(0, ${this.getWeekdayLabelSize()})`;\n  }\n\n  getViewBox() {\n    if (this.props.horizontal) {\n      return `0 0 ${this.getWidth()} ${this.getHeight()}`;\n    }\n\n    return `0 0 ${this.getHeight()} ${this.getWidth()}`;\n  }\n\n  getSquareCoordinates(dayIndex) {\n    if (this.props.horizontal) {\n      return [0, dayIndex * this.getSquareSizeWithGutter()];\n    }\n\n    return [dayIndex * this.getSquareSizeWithGutter(), 0];\n  }\n\n  getWeekdayLabelCoordinates(dayIndex) {\n    if (this.props.horizontal) {\n      return [0, (dayIndex + 1) * SQUARE_SIZE + dayIndex * this.props.gutterSize];\n    }\n\n    return [dayIndex * SQUARE_SIZE + dayIndex * this.props.gutterSize, SQUARE_SIZE];\n  }\n\n  getMonthLabelCoordinates(weekIndex) {\n    if (this.props.horizontal) {\n      return [weekIndex * this.getSquareSizeWithGutter(), this.getMonthLabelSize() - MONTH_LABEL_GUTTER_SIZE];\n    }\n\n    const verticalOffset = -2;\n    return [0, (weekIndex + 1) * this.getSquareSizeWithGutter() + verticalOffset];\n  }\n\n  handleClick(value) {\n    if (this.props.onClick) {\n      this.props.onClick(value);\n    }\n  }\n\n  handleMouseOver(e, value) {\n    if (this.props.onMouseOver) {\n      this.props.onMouseOver(e, value);\n    }\n  }\n\n  handleMouseLeave(e, value) {\n    if (this.props.onMouseLeave) {\n      this.props.onMouseLeave(e, value);\n    }\n  }\n\n  renderSquare(dayIndex, index) {\n    const indexOutOfRange = index < this.getNumEmptyDaysAtStart() || index >= this.getNumEmptyDaysAtStart() + this.getDateDifferenceInDays();\n\n    if (indexOutOfRange && !this.props.showOutOfRangeDays) {\n      return null;\n    }\n\n    const [x, y] = this.getSquareCoordinates(dayIndex);\n    const value = this.getValueForIndex(index);\n\n    const rect =\n    /*#__PURE__*/\n    // eslint-disable-next-line jsx-a11y/mouse-events-have-key-events\n    _jsxDEV(\"rect\", {\n      width: SQUARE_SIZE,\n      height: SQUARE_SIZE,\n      x: x,\n      y: y,\n      className: this.getClassNameForIndex(index),\n      onClick: () => this.handleClick(value),\n      onMouseOver: e => this.handleMouseOver(e, value),\n      onMouseLeave: e => this.handleMouseLeave(e, value),\n      ...this.getTooltipDataAttrsForIndex(index),\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: this.getTitleForIndex(index)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this)\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }, this);\n\n    const {\n      transformDayElement\n    } = this.props;\n    return transformDayElement ? transformDayElement(rect, value, index) : rect;\n  }\n\n  renderWeek(weekIndex) {\n    return /*#__PURE__*/_jsxDEV(\"g\", {\n      transform: this.getTransformForWeek(weekIndex),\n      className: `${CSS_PSEDUO_NAMESPACE}week`,\n      children: getRange(DAYS_IN_WEEK).map(dayIndex => this.renderSquare(dayIndex, weekIndex * DAYS_IN_WEEK + dayIndex))\n    }, weekIndex, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, this);\n  }\n\n  renderAllWeeks() {\n    return getRange(this.getWeekCount()).map(weekIndex => this.renderWeek(weekIndex));\n  }\n\n  renderMonthLabels() {\n    if (!this.props.showMonthLabels) {\n      return null;\n    }\n\n    const weekRange = getRange(this.getWeekCount() - 1); // don't render for last week, because label will be cut off\n\n    return weekRange.map(weekIndex => {\n      const endOfWeek = shiftDate(this.getStartDateWithEmptyDays(), (weekIndex + 1) * DAYS_IN_WEEK);\n      const [x, y] = this.getMonthLabelCoordinates(weekIndex);\n      return endOfWeek.getDate() >= 1 && endOfWeek.getDate() <= DAYS_IN_WEEK ? /*#__PURE__*/_jsxDEV(\"text\", {\n        x: x,\n        y: y,\n        className: `${CSS_PSEDUO_NAMESPACE}month-label`,\n        children: this.props.monthLabels[endOfWeek.getMonth()]\n      }, weekIndex, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this) : null;\n    });\n  }\n\n  renderWeekdayLabels() {\n    if (!this.props.showWeekdayLabels) {\n      return null;\n    }\n\n    return this.props.weekdayLabels.map((weekdayLabel, dayIndex) => {\n      const [x, y] = this.getWeekdayLabelCoordinates(dayIndex);\n      const cssClasses = `${this.props.horizontal ? '' : `${CSS_PSEDUO_NAMESPACE}small-text`} ${CSS_PSEDUO_NAMESPACE}weekday-label`; // eslint-disable-next-line no-bitwise\n\n      return /*#__PURE__*/_jsxDEV(\"text\", {\n        x: x,\n        y: y,\n        className: cssClasses,\n        children: weekdayLabel\n      }, `${x}${y}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 9\n      }, this);\n    });\n  }\n\n  render() {\n    this.valueCache = this.getValueCache(this.props);\n    return /*#__PURE__*/_jsxDEV(\"svg\", {\n      className: \"react-calendar-heatmap\",\n      viewBox: this.getViewBox(),\n      children: [/*#__PURE__*/_jsxDEV(\"g\", {\n        transform: this.getTransformForMonthLabels(),\n        className: `${CSS_PSEDUO_NAMESPACE}month-labels`,\n        children: this.renderMonthLabels()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n        transform: this.getTransformForAllWeeks(),\n        className: `${CSS_PSEDUO_NAMESPACE}all-weeks`,\n        children: this.renderAllWeeks()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n        transform: this.getTransformForWeekdayLabels(),\n        className: `${CSS_PSEDUO_NAMESPACE}weekday-labels`,\n        children: this.renderWeekdayLabels()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nCalendarHeatmap.propTypes = {\n  values: PropTypes.arrayOf(PropTypes.shape({\n    date: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.instanceOf(Date)]).isRequired\n  }).isRequired).isRequired,\n  // array of objects with date and arbitrary metadata\n  numDays: PropTypes.number,\n  // number of days back from endDate to show\n  startDate: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.instanceOf(Date)]),\n  // start of date range\n  endDate: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.instanceOf(Date)]),\n  // end of date range\n  gutterSize: PropTypes.number,\n  // size of space between squares\n  horizontal: PropTypes.bool,\n  // whether to orient horizontally or vertically\n  showMonthLabels: PropTypes.bool,\n  // whether to show month labels\n  showWeekdayLabels: PropTypes.bool,\n  // whether to show weekday labels\n  showOutOfRangeDays: PropTypes.bool,\n  // whether to render squares for extra days in week after endDate, and before start date\n  tooltipDataAttrs: PropTypes.oneOfType([PropTypes.object, PropTypes.func]),\n  // data attributes to add to square for setting 3rd party tooltips, e.g. { 'data-toggle': 'tooltip' } for bootstrap tooltips\n  titleForValue: PropTypes.func,\n  // function which returns title text for value\n  classForValue: PropTypes.func,\n  // function which returns html class for value\n  monthLabels: PropTypes.arrayOf(PropTypes.string),\n  // An array with 12 strings representing the text from janurary to december\n  weekdayLabels: PropTypes.arrayOf(PropTypes.string),\n  // An array with 7 strings representing the text from Sun to Sat\n  onClick: PropTypes.func,\n  // callback function when a square is clicked\n  onMouseOver: PropTypes.func,\n  // callback function when mouse pointer is over a square\n  onMouseLeave: PropTypes.func,\n  // callback function when mouse pointer is left a square\n  transformDayElement: PropTypes.func // function to further transform the svg element for a single day\n\n};\nCalendarHeatmap.defaultProps = {\n  numDays: null,\n  startDate: dateNDaysAgo(200),\n  endDate: new Date(),\n  gutterSize: 1,\n  horizontal: true,\n  showMonthLabels: true,\n  showWeekdayLabels: false,\n  showOutOfRangeDays: false,\n  tooltipDataAttrs: null,\n  titleForValue: null,\n  classForValue: value => value ? 'color-filled' : 'color-empty',\n  monthLabels: MONTH_LABELS,\n  weekdayLabels: DAY_LABELS,\n  onClick: null,\n  onMouseOver: null,\n  onMouseLeave: null,\n  transformDayElement: null\n};\nexport default CalendarHeatmap;","map":{"version":3,"sources":["/home/iivanova/Desktop/UBC_2021_2022/CPSC547_information_visualization/project/explorify/src/calendar-heatmap/index.js"],"names":["React","PropTypes","memoizeOne","DAYS_IN_WEEK","MILLISECONDS_IN_ONE_DAY","DAY_LABELS","MONTH_LABELS","dateNDaysAgo","shiftDate","getBeginningTimeForDate","convertToDate","getRange","SQUARE_SIZE","MONTH_LABEL_GUTTER_SIZE","CSS_PSEDUO_NAMESPACE","CalendarHeatmap","Component","getValueCache","props","values","reduce","memo","value","date","index","Math","floor","getStartDateWithEmptyDays","className","classForValue","title","titleForValue","tooltipDataAttrs","getTooltipDataAttrsForValue","getDateDifferenceInDays","startDate","numDays","console","warn","timeDiff","getEndDate","ceil","getSquareSizeWithGutter","gutterSize","getMonthLabelSize","showMonthLabels","horizontal","getWeekdayLabelSize","showWeekdayLabels","getStartDate","endDate","getNumEmptyDaysAtStart","getDay","getNumEmptyDaysAtEnd","getWeekCount","numDaysRoundedToWeek","getWeekWidth","getWidth","getHeight","getValueForIndex","valueCache","getClassNameForIndex","getTitleForIndex","getTooltipDataAttrsForIndex","count","getTransformForWeek","weekIndex","getTransformForWeekdayLabels","getTransformForMonthLabels","getTransformForAllWeeks","getViewBox","getSquareCoordinates","dayIndex","getWeekdayLabelCoordinates","getMonthLabelCoordinates","verticalOffset","handleClick","onClick","handleMouseOver","e","onMouseOver","handleMouseLeave","onMouseLeave","renderSquare","indexOutOfRange","showOutOfRangeDays","x","y","rect","transformDayElement","renderWeek","map","renderAllWeeks","renderMonthLabels","weekRange","endOfWeek","getDate","monthLabels","getMonth","renderWeekdayLabels","weekdayLabels","weekdayLabel","cssClasses","render","propTypes","arrayOf","shape","oneOfType","string","number","instanceOf","Date","isRequired","bool","object","func","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport memoizeOne from 'memoize-one';\nimport { DAYS_IN_WEEK, MILLISECONDS_IN_ONE_DAY, DAY_LABELS, MONTH_LABELS } from './constants';\nimport {\n  dateNDaysAgo,\n  shiftDate,\n  getBeginningTimeForDate,\n  convertToDate,\n  getRange,\n} from './helpers';\n\nconst SQUARE_SIZE = 13;\nconst MONTH_LABEL_GUTTER_SIZE = 4;\nconst CSS_PSEDUO_NAMESPACE = 'react-calendar-heatmap-';\n\nclass CalendarHeatmap extends React.Component {\n  getDateDifferenceInDays() {\n    const { startDate, numDays } = this.props;\n    if (numDays) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        'numDays is a deprecated prop. It will be removed in the next release. Consider using the startDate prop instead.',\n      );\n      return numDays;\n    }\n    const timeDiff = this.getEndDate() - convertToDate(startDate);\n    return Math.ceil(timeDiff / MILLISECONDS_IN_ONE_DAY);\n  }\n\n  getSquareSizeWithGutter() {\n    return SQUARE_SIZE + this.props.gutterSize;\n  }\n\n  getMonthLabelSize() {\n    if (!this.props.showMonthLabels) {\n      return 0;\n    }\n    if (this.props.horizontal) {\n      return SQUARE_SIZE + MONTH_LABEL_GUTTER_SIZE;\n    }\n    return 2 * (SQUARE_SIZE + MONTH_LABEL_GUTTER_SIZE);\n  }\n\n  getWeekdayLabelSize() {\n    if (!this.props.showWeekdayLabels) {\n      return 0;\n    }\n    if (this.props.horizontal) {\n      return 30;\n    }\n    return SQUARE_SIZE * 1.5;\n  }\n\n  getStartDate() {\n    return shiftDate(this.getEndDate(), -this.getDateDifferenceInDays() + 1); // +1 because endDate is inclusive\n  }\n\n  getEndDate() {\n    return getBeginningTimeForDate(convertToDate(this.props.endDate));\n  }\n\n  getStartDateWithEmptyDays() {\n    return shiftDate(this.getStartDate(), -this.getNumEmptyDaysAtStart());\n  }\n\n  getNumEmptyDaysAtStart() {\n    return this.getStartDate().getDay();\n  }\n\n  getNumEmptyDaysAtEnd() {\n    return DAYS_IN_WEEK - 1 - this.getEndDate().getDay();\n  }\n\n  getWeekCount() {\n    const numDaysRoundedToWeek =\n      this.getDateDifferenceInDays() + this.getNumEmptyDaysAtStart() + this.getNumEmptyDaysAtEnd();\n    return Math.ceil(numDaysRoundedToWeek / DAYS_IN_WEEK);\n  }\n\n  getWeekWidth() {\n    return DAYS_IN_WEEK * this.getSquareSizeWithGutter();\n  }\n\n  getWidth() {\n    return (\n      this.getWeekCount() * this.getSquareSizeWithGutter() -\n      (this.props.gutterSize - this.getWeekdayLabelSize())\n    );\n  }\n\n  getHeight() {\n    return (\n      this.getWeekWidth() +\n      (this.getMonthLabelSize() - this.props.gutterSize) +\n      this.getWeekdayLabelSize()\n    );\n  }\n\n  getValueCache = memoizeOne((props) =>\n    props.values.reduce((memo, value) => {\n      const date = convertToDate(value.date);\n      const index = Math.floor((date - this.getStartDateWithEmptyDays()) / MILLISECONDS_IN_ONE_DAY);\n      // eslint-disable-next-line no-param-reassign\n      memo[index] = {\n        value,\n        className: this.props.classForValue(value),\n        title: this.props.titleForValue ? this.props.titleForValue(value) : null,\n        tooltipDataAttrs: this.getTooltipDataAttrsForValue(value),\n      };\n      return memo;\n    }, {}),\n  );\n\n  getValueForIndex(index) {\n    if (this.valueCache[index]) {\n      return this.valueCache[index].value;\n    }\n    return null;\n  }\n\n  getClassNameForIndex(index) {\n    if (this.valueCache[index]) {\n      return this.valueCache[index].className;\n    }\n    return this.props.classForValue(null);\n  }\n\n  getTitleForIndex(index) {\n    if (this.valueCache[index]) {\n      return this.valueCache[index].title;\n    }\n    return this.props.titleForValue ? this.props.titleForValue(null) : null;\n  }\n\n  getTooltipDataAttrsForIndex(index) {\n    if (this.valueCache[index]) {\n      return this.valueCache[index].tooltipDataAttrs;\n    }\n    return this.getTooltipDataAttrsForValue({ date: null, count: null });\n  }\n\n  getTooltipDataAttrsForValue(value) {\n    const { tooltipDataAttrs } = this.props;\n\n    if (typeof tooltipDataAttrs === 'function') {\n      return tooltipDataAttrs(value);\n    }\n    return tooltipDataAttrs;\n  }\n\n  getTransformForWeek(weekIndex) {\n    if (this.props.horizontal) {\n      return `translate(${weekIndex * this.getSquareSizeWithGutter()}, 0)`;\n    }\n    return `translate(0, ${weekIndex * this.getSquareSizeWithGutter()})`;\n  }\n\n  getTransformForWeekdayLabels() {\n    if (this.props.horizontal) {\n      return `translate(${SQUARE_SIZE}, ${this.getMonthLabelSize()})`;\n    }\n    return null;\n  }\n\n  getTransformForMonthLabels() {\n    if (this.props.horizontal) {\n      return `translate(${this.getWeekdayLabelSize()}, 0)`;\n    }\n    return `translate(${this.getWeekWidth() +\n      MONTH_LABEL_GUTTER_SIZE}, ${this.getWeekdayLabelSize()})`;\n  }\n\n  getTransformForAllWeeks() {\n    if (this.props.horizontal) {\n      return `translate(${this.getWeekdayLabelSize()}, ${this.getMonthLabelSize()})`;\n    }\n    return `translate(0, ${this.getWeekdayLabelSize()})`;\n  }\n\n  getViewBox() {\n    if (this.props.horizontal) {\n      return `0 0 ${this.getWidth()} ${this.getHeight()}`;\n    }\n    return `0 0 ${this.getHeight()} ${this.getWidth()}`;\n  }\n\n  getSquareCoordinates(dayIndex) {\n    if (this.props.horizontal) {\n      return [0, dayIndex * this.getSquareSizeWithGutter()];\n    }\n    return [dayIndex * this.getSquareSizeWithGutter(), 0];\n  }\n\n  getWeekdayLabelCoordinates(dayIndex) {\n    if (this.props.horizontal) {\n      return [0, (dayIndex + 1) * SQUARE_SIZE + dayIndex * this.props.gutterSize];\n    }\n    return [dayIndex * SQUARE_SIZE + dayIndex * this.props.gutterSize, SQUARE_SIZE];\n  }\n\n  getMonthLabelCoordinates(weekIndex) {\n    if (this.props.horizontal) {\n      return [\n        weekIndex * this.getSquareSizeWithGutter(),\n        this.getMonthLabelSize() - MONTH_LABEL_GUTTER_SIZE,\n      ];\n    }\n    const verticalOffset = -2;\n    return [0, (weekIndex + 1) * this.getSquareSizeWithGutter() + verticalOffset];\n  }\n\n  handleClick(value) {\n    if (this.props.onClick) {\n      this.props.onClick(value);\n    }\n  }\n\n  handleMouseOver(e, value) {\n    if (this.props.onMouseOver) {\n      this.props.onMouseOver(e, value);\n    }\n  }\n\n  handleMouseLeave(e, value) {\n    if (this.props.onMouseLeave) {\n      this.props.onMouseLeave(e, value);\n    }\n  }\n\n  renderSquare(dayIndex, index) {\n    const indexOutOfRange =\n      index < this.getNumEmptyDaysAtStart() ||\n      index >= this.getNumEmptyDaysAtStart() + this.getDateDifferenceInDays();\n    if (indexOutOfRange && !this.props.showOutOfRangeDays) {\n      return null;\n    }\n    const [x, y] = this.getSquareCoordinates(dayIndex);\n    const value = this.getValueForIndex(index);\n    const rect = (\n      // eslint-disable-next-line jsx-a11y/mouse-events-have-key-events\n      <rect\n        key={index}\n        width={SQUARE_SIZE}\n        height={SQUARE_SIZE}\n        x={x}\n        y={y}\n        className={this.getClassNameForIndex(index)}\n        onClick={() => this.handleClick(value)}\n        onMouseOver={(e) => this.handleMouseOver(e, value)}\n        onMouseLeave={(e) => this.handleMouseLeave(e, value)}\n        {...this.getTooltipDataAttrsForIndex(index)}\n      >\n        <title>{this.getTitleForIndex(index)}</title>\n      </rect>\n    );\n    const { transformDayElement } = this.props;\n    return transformDayElement ? transformDayElement(rect, value, index) : rect;\n  }\n\n  renderWeek(weekIndex) {\n    return (\n      <g\n        key={weekIndex}\n        transform={this.getTransformForWeek(weekIndex)}\n        className={`${CSS_PSEDUO_NAMESPACE}week`}\n      >\n        {getRange(DAYS_IN_WEEK).map((dayIndex) =>\n          this.renderSquare(dayIndex, weekIndex * DAYS_IN_WEEK + dayIndex),\n        )}\n      </g>\n    );\n  }\n\n  renderAllWeeks() {\n    return getRange(this.getWeekCount()).map((weekIndex) => this.renderWeek(weekIndex));\n  }\n\n  renderMonthLabels() {\n    if (!this.props.showMonthLabels) {\n      return null;\n    }\n    const weekRange = getRange(this.getWeekCount() - 1); // don't render for last week, because label will be cut off\n    return weekRange.map((weekIndex) => {\n      const endOfWeek = shiftDate(this.getStartDateWithEmptyDays(), (weekIndex + 1) * DAYS_IN_WEEK);\n      const [x, y] = this.getMonthLabelCoordinates(weekIndex);\n      return endOfWeek.getDate() >= 1 && endOfWeek.getDate() <= DAYS_IN_WEEK ? (\n        <text key={weekIndex} x={x} y={y} className={`${CSS_PSEDUO_NAMESPACE}month-label`}>\n          {this.props.monthLabels[endOfWeek.getMonth()]}\n        </text>\n      ) : null;\n    });\n  }\n\n  renderWeekdayLabels() {\n    if (!this.props.showWeekdayLabels) {\n      return null;\n    }\n    return this.props.weekdayLabels.map((weekdayLabel, dayIndex) => {\n      const [x, y] = this.getWeekdayLabelCoordinates(dayIndex);\n      const cssClasses = `${\n        this.props.horizontal ? '' : `${CSS_PSEDUO_NAMESPACE}small-text`\n      } ${CSS_PSEDUO_NAMESPACE}weekday-label`;\n      // eslint-disable-next-line no-bitwise\n      return  (\n        <text key={`${x}${y}`} x={x} y={y} className={cssClasses}>\n          {weekdayLabel}\n        </text>\n      );\n    });\n  }\n\n  render() {\n    this.valueCache = this.getValueCache(this.props);\n\n    return (\n      <svg className=\"react-calendar-heatmap\" viewBox={this.getViewBox()}>\n        <g\n          transform={this.getTransformForMonthLabels()}\n          className={`${CSS_PSEDUO_NAMESPACE}month-labels`}\n        >\n          {this.renderMonthLabels()}\n        </g>\n        <g\n          transform={this.getTransformForAllWeeks()}\n          className={`${CSS_PSEDUO_NAMESPACE}all-weeks`}\n        >\n          {this.renderAllWeeks()}\n        </g>\n        <g\n          transform={this.getTransformForWeekdayLabels()}\n          className={`${CSS_PSEDUO_NAMESPACE}weekday-labels`}\n        >\n          {this.renderWeekdayLabels()}\n        </g>\n      </svg>\n    );\n  }\n}\n\nCalendarHeatmap.propTypes = {\n  values: PropTypes.arrayOf(\n    PropTypes.shape({\n      date: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.instanceOf(Date)])\n        .isRequired,\n    }).isRequired,\n  ).isRequired, // array of objects with date and arbitrary metadata\n  numDays: PropTypes.number, // number of days back from endDate to show\n  startDate: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.instanceOf(Date)]), // start of date range\n  endDate: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.instanceOf(Date)]), // end of date range\n  gutterSize: PropTypes.number, // size of space between squares\n  horizontal: PropTypes.bool, // whether to orient horizontally or vertically\n  showMonthLabels: PropTypes.bool, // whether to show month labels\n  showWeekdayLabels: PropTypes.bool, // whether to show weekday labels\n  showOutOfRangeDays: PropTypes.bool, // whether to render squares for extra days in week after endDate, and before start date\n  tooltipDataAttrs: PropTypes.oneOfType([PropTypes.object, PropTypes.func]), // data attributes to add to square for setting 3rd party tooltips, e.g. { 'data-toggle': 'tooltip' } for bootstrap tooltips\n  titleForValue: PropTypes.func, // function which returns title text for value\n  classForValue: PropTypes.func, // function which returns html class for value\n  monthLabels: PropTypes.arrayOf(PropTypes.string), // An array with 12 strings representing the text from janurary to december\n  weekdayLabels: PropTypes.arrayOf(PropTypes.string), // An array with 7 strings representing the text from Sun to Sat\n  onClick: PropTypes.func, // callback function when a square is clicked\n  onMouseOver: PropTypes.func, // callback function when mouse pointer is over a square\n  onMouseLeave: PropTypes.func, // callback function when mouse pointer is left a square\n  transformDayElement: PropTypes.func, // function to further transform the svg element for a single day\n};\n\nCalendarHeatmap.defaultProps = {\n  numDays: null,\n  startDate: dateNDaysAgo(200),\n  endDate: new Date(),\n  gutterSize: 1,\n  horizontal: true,\n  showMonthLabels: true,\n  showWeekdayLabels: false,\n  showOutOfRangeDays: false,\n  tooltipDataAttrs: null,\n  titleForValue: null,\n  classForValue: (value) => (value ? 'color-filled' : 'color-empty'),\n  monthLabels: MONTH_LABELS,\n  weekdayLabels: DAY_LABELS,\n  onClick: null,\n  onMouseOver: null,\n  onMouseLeave: null,\n  transformDayElement: null,\n};\n\nexport default CalendarHeatmap;\n"]},"metadata":{},"sourceType":"module"}