{"version":3,"sources":["calendar-heatmap/constants.js","calendar-heatmap/helpers.js","calendar-heatmap/index.js","helpers.js","D3BarChart.js","ReactCalendarHeatmap.js","App.js","reportWebVitals.js","index.js"],"names":["MILLISECONDS_IN_ONE_DAY","shiftDate","date","numDays","newDate","Date","setDate","getDate","convertToDate","obj","getRange","count","arr","idx","push","numDaysAgo","SQUARE_SIZE","CSS_PSEDUO_NAMESPACE","CalendarHeatmap","getValueCache","memoizeOne","props","values","reduce","memo","value","Math","floor","getStartDateWithEmptyDays","className","classForValue","title","titleForValue","tooltipDataAttrs","getTooltipDataAttrsForValue","this","startDate","console","warn","timeDiff","getEndDate","ceil","gutterSize","showMonthLabels","horizontal","showWeekdayLabels","getDateDifferenceInDays","endDate","getFullYear","getMonth","getStartDate","getNumEmptyDaysAtStart","getDay","DAYS_IN_WEEK","numDaysRoundedToWeek","getNumEmptyDaysAtEnd","getSquareSizeWithGutter","getWeekCount","getWeekdayLabelSize","getWeekWidth","getMonthLabelSize","index","valueCache","log","weekIndex","getWidth","getHeight","dayIndex","onClick","e","onMouseOver","onMouseLeave","showOutOfRangeDays","getSquareCoordinates","x","y","getValueForIndex","rect","width","height","getClassNameForIndex","handleClick","handleMouseOver","handleMouseLeave","getTooltipDataAttrsForIndex","getTitleForIndex","transformDayElement","transform","getTransformForWeek","map","renderSquare","renderWeek","endOfWeek","getMonthLabelCoordinates","monthLabels","weekdayLabels","weekdayLabel","getWeekdayLabelCoordinates","cssClasses","viewBox","getViewBox","getTransformForMonthLabels","renderMonthLabels","getTransformForAllWeeks","renderAllWeeks","getTransformForWeekdayLabels","renderWeekdayLabels","React","Component","defaultProps","groupBy","rawData","key","previousVal","currentVal","msToTime","duration","isNaN","seconds","minutes","hours","comparator","first","second","margin","w","h","updateBar","dataset","yScale","d3","domain","length","rangeRound","padding","yScaleTicks","xScale","range","yAxis","tickFormat","d","artist","slice","svg","select","selectAll","data","transition","attr","i","bandwidth","call","D3BarChart","require","barChart","useRef","elem","entry","endTime","split","msPlayed","artistName","streamingData","Object","day","prev","cur","artists","keys","sort","concat","Array","fill","allArtists","top20Artists","useState","useEffect","current","enter","append","div","on","event","style","pageX","pageY","html","id","ref","ReactCalendarHeatmap","allDates","toISOString","lookup","Map","forEach","has","set","from","minMax","binSize","color","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1ea7c83a.chunk.js","sourcesContent":["export const MILLISECONDS_IN_ONE_DAY = 24 * 60 * 60 * 1000;\n\nexport const DAYS_IN_WEEK = 7;\n\nexport const MONTH_LABELS = [\n  'Jan',\n  'Feb',\n  'Mar',\n  'Apr',\n  'May',\n  'Jun',\n  'Jul',\n  'Aug',\n  'Sep',\n  'Oct',\n  'Nov',\n  'Dec',\n];\n\nexport const DAY_LABELS = ['S', 'M', 'T', 'W', 'T', 'F', 'S'];\n","// returns a new date shifted a certain number of days (can be negative)\nexport function shiftDate(date, numDays) {\n  const newDate = new Date(date);\n  newDate.setDate(newDate.getDate() + numDays);\n  return newDate;\n}\n\nexport function getBeginningTimeForDate(date) {\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n}\n\n// obj can be a parseable string, a millisecond timestamp, or a Date object\nexport function convertToDate(obj) {\n  return obj instanceof Date ? obj : new Date(obj);\n}\n\nexport function dateNDaysAgo(numDaysAgo) {\n  return shiftDate(new Date(), -numDaysAgo);\n}\n\nexport function getRange(count) {\n  const arr = [];\n  for (let idx = 0; idx < count; idx += 1) {\n    arr.push(idx);\n  }\n  return arr;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport memoizeOne from 'memoize-one';\nimport { DAYS_IN_WEEK, MILLISECONDS_IN_ONE_DAY, DAY_LABELS, MONTH_LABELS } from './constants';\nimport {\n  dateNDaysAgo,\n  shiftDate,\n  getBeginningTimeForDate,\n  convertToDate,\n  getRange,\n} from './helpers';\n\nconst SQUARE_SIZE = 10;\nconst MONTH_LABEL_GUTTER_SIZE = 4;\nconst CSS_PSEDUO_NAMESPACE = 'react-calendar-heatmap-';\n\nclass CalendarHeatmap extends React.Component {\n  getDateDifferenceInDays() {\n    const { startDate, numDays } = this.props;\n    if (numDays) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        'numDays is a deprecated prop. It will be removed in the next release. Consider using the startDate prop instead.',\n      );\n      return numDays;\n    }\n    const timeDiff = this.getEndDate() - convertToDate(startDate);\n    return Math.ceil(timeDiff / MILLISECONDS_IN_ONE_DAY);\n  }\n\n  getSquareSizeWithGutter() {\n    return SQUARE_SIZE + this.props.gutterSize;\n  }\n\n  getMonthLabelSize() {\n    if (!this.props.showMonthLabels) {\n      return 0;\n    }\n    if (this.props.horizontal) {\n      return SQUARE_SIZE + MONTH_LABEL_GUTTER_SIZE;\n    }\n    return 2 * (SQUARE_SIZE + MONTH_LABEL_GUTTER_SIZE);\n  }\n\n  getWeekdayLabelSize() {\n    if (!this.props.showWeekdayLabels) {\n      return 0;\n    }\n    if (this.props.horizontal) {\n      return 30;\n    }\n    return SQUARE_SIZE * 1.5;\n  }\n\n  getStartDate() {\n    return shiftDate(this.getEndDate(), -this.getDateDifferenceInDays() + 1); // +1 because endDate is inclusive\n  }\n\n  getEndDate() {\n    return getBeginningTimeForDate(convertToDate(this.props.endDate));\n  }\n\n  getStartDateWithEmptyDays() {\n    return shiftDate(this.getStartDate(), -this.getNumEmptyDaysAtStart());\n  }\n\n  getNumEmptyDaysAtStart() {\n    return this.getStartDate().getDay();\n  }\n\n  getNumEmptyDaysAtEnd() {\n    return DAYS_IN_WEEK - 1 - this.getEndDate().getDay();\n  }\n\n  getWeekCount() {\n    const numDaysRoundedToWeek =\n      this.getDateDifferenceInDays() + this.getNumEmptyDaysAtStart() + this.getNumEmptyDaysAtEnd();\n    return Math.ceil(numDaysRoundedToWeek / DAYS_IN_WEEK);\n  }\n\n  getWeekWidth() {\n    return DAYS_IN_WEEK * this.getSquareSizeWithGutter();\n  }\n\n  getWidth() {\n    return (\n      this.getWeekCount() * this.getSquareSizeWithGutter() -\n      (this.props.gutterSize - this.getWeekdayLabelSize())\n    );\n  }\n\n  getHeight() {\n    return (\n      this.getWeekWidth() +\n      (this.getMonthLabelSize() - this.props.gutterSize) +\n      this.getWeekdayLabelSize()\n    );\n  }\n\n  getValueCache = memoizeOne((props) =>\n    props.values.reduce((memo, value) => {\n      const date = convertToDate(value.date);\n      const index = Math.floor((date - this.getStartDateWithEmptyDays()) / MILLISECONDS_IN_ONE_DAY);\n      // eslint-disable-next-line no-param-reassign\n      memo[index] = {\n        value,\n        className: this.props.classForValue(value),\n        title: this.props.titleForValue ? this.props.titleForValue(value) : null,\n        tooltipDataAttrs: this.getTooltipDataAttrsForValue(value),\n      };\n      return memo;\n    }, {}),\n  );\n\n  getValueForIndex(index) {\n    if (this.valueCache[index]) {\n      return this.valueCache[index].value;\n    }\n    return null;\n  }\n\n  getClassNameForIndex(index) {\n    if (this.valueCache[index]) {\n      return this.valueCache[index].className;\n    }\n    return this.props.classForValue(null);\n  }\n\n  getTitleForIndex(index) {\n    if (this.valueCache[index]) {\n      return this.valueCache[index].title;\n    }\n    return this.props.titleForValue ? this.props.titleForValue(null) : null;\n  }\n\n  getTooltipDataAttrsForIndex(index) {\n    if (this.valueCache[index]) {\n      return this.valueCache[index].tooltipDataAttrs;\n    }\n    console.log(this.valueCache[index])\n    return this.getTooltipDataAttrsForValue({ date: \"\", count: 0 });\n  }\n\n  getTooltipDataAttrsForValue(value) {\n    const { tooltipDataAttrs } = this.props;\n\n    if (typeof tooltipDataAttrs === 'function') {\n      return tooltipDataAttrs(value);\n    }\n    return tooltipDataAttrs;\n  }\n\n  getTransformForWeek(weekIndex) {\n    if (this.props.horizontal) {\n      return `translate(${weekIndex * this.getSquareSizeWithGutter()}, 0)`;\n    }\n    return `translate(0, ${weekIndex * this.getSquareSizeWithGutter()})`;\n  }\n\n  getTransformForWeekdayLabels() {\n    if (this.props.horizontal) {\n      return `translate(${SQUARE_SIZE}, ${this.getMonthLabelSize()})`;\n    }\n    return null;\n  }\n\n  getTransformForMonthLabels() {\n    if (this.props.horizontal) {\n      return `translate(${this.getWeekdayLabelSize()}, 0)`;\n    }\n    return `translate(${this.getWeekWidth() +\n      MONTH_LABEL_GUTTER_SIZE}, ${this.getWeekdayLabelSize()})`;\n  }\n\n  getTransformForAllWeeks() {\n    if (this.props.horizontal) {\n      return `translate(${this.getWeekdayLabelSize()}, ${this.getMonthLabelSize()})`;\n    }\n    return `translate(0, ${this.getWeekdayLabelSize()})`;\n  }\n\n  getViewBox() {\n    if (this.props.horizontal) {\n      return `0 0 ${this.getWidth()} ${this.getHeight()}`;\n    }\n    return `0 0 ${this.getHeight()} ${this.getWidth()}`;\n  }\n\n  getSquareCoordinates(dayIndex) {\n    if (this.props.horizontal) {\n      return [0, dayIndex * this.getSquareSizeWithGutter()];\n    }\n    return [dayIndex * this.getSquareSizeWithGutter(), 0];\n  }\n\n  getWeekdayLabelCoordinates(dayIndex) {\n    if (this.props.horizontal) {\n      return [0, (dayIndex + 1) * SQUARE_SIZE + dayIndex * this.props.gutterSize];\n    }\n    return [dayIndex * SQUARE_SIZE + dayIndex * this.props.gutterSize, SQUARE_SIZE];\n  }\n\n  getMonthLabelCoordinates(weekIndex) {\n    if (this.props.horizontal) {\n      return [\n        weekIndex * this.getSquareSizeWithGutter(),\n        this.getMonthLabelSize() - MONTH_LABEL_GUTTER_SIZE,\n      ];\n    }\n    const verticalOffset = -2;\n    return [0, (weekIndex + 1) * this.getSquareSizeWithGutter() + verticalOffset];\n  }\n\n  handleClick(value) {\n    if (this.props.onClick) {\n      this.props.onClick(value);\n    }\n  }\n\n  handleMouseOver(e, value) {\n    if (this.props.onMouseOver) {\n      this.props.onMouseOver(e, value);\n    }\n  }\n\n  handleMouseLeave(e, value) {\n    if (this.props.onMouseLeave) {\n      this.props.onMouseLeave(e, value);\n    }\n  }\n\n  renderSquare(dayIndex, index) {\n    const indexOutOfRange =\n      index < this.getNumEmptyDaysAtStart() ||\n      index >= this.getNumEmptyDaysAtStart() + this.getDateDifferenceInDays();\n    if (indexOutOfRange && !this.props.showOutOfRangeDays) {\n      return null;\n    }\n    const [x, y] = this.getSquareCoordinates(dayIndex);\n    const value = this.getValueForIndex(index);\n    const rect = (\n      // eslint-disable-next-line jsx-a11y/mouse-events-have-key-events\n      <rect\n        key={index}\n        width={SQUARE_SIZE}\n        height={SQUARE_SIZE}\n        x={x}\n        y={y}\n        className={`day ${this.getClassNameForIndex(index)}`}\n        onClick={() => this.handleClick(value)}\n        onMouseOver={(e) => this.handleMouseOver(e, value)}\n        onMouseLeave={(e) => this.handleMouseLeave(e, value)}\n        {...this.getTooltipDataAttrsForIndex(index)}\n      >\n        <title>{this.getTitleForIndex(index)}</title>\n      </rect>\n    );\n    const { transformDayElement } = this.props;\n    return transformDayElement ? transformDayElement(rect, value, index) : rect;\n  }\n\n  renderWeek(weekIndex) {\n    return (\n      <g\n        key={weekIndex}\n        transform={this.getTransformForWeek(weekIndex)}\n        className={`${CSS_PSEDUO_NAMESPACE}week`}\n      >\n        {getRange(DAYS_IN_WEEK).map((dayIndex) =>\n          this.renderSquare(dayIndex, weekIndex * DAYS_IN_WEEK + dayIndex),\n        )}\n      </g>\n    );\n  }\n\n  renderAllWeeks() {\n    return getRange(this.getWeekCount()).map((weekIndex) => this.renderWeek(weekIndex));\n  }\n\n  renderMonthLabels() {\n    if (!this.props.showMonthLabels) {\n      return null;\n    }\n    const weekRange = getRange(this.getWeekCount() - 1); // don't render for last week, because label will be cut off\n    return weekRange.map((weekIndex) => {\n      const endOfWeek = shiftDate(this.getStartDateWithEmptyDays(), (weekIndex + 1) * DAYS_IN_WEEK);\n      const [x, y] = this.getMonthLabelCoordinates(weekIndex);\n      return endOfWeek.getDate() >= 1 && endOfWeek.getDate() <= DAYS_IN_WEEK ? (\n        <text key={weekIndex} x={x} y={y} className={`${CSS_PSEDUO_NAMESPACE}month-label`}>\n          {this.props.monthLabels[endOfWeek.getMonth()]}\n        </text>\n      ) : null;\n    });\n  }\n\n  renderWeekdayLabels() {\n    if (!this.props.showWeekdayLabels) {\n      return null;\n    }\n    return this.props.weekdayLabels.map((weekdayLabel, dayIndex) => {\n      const [x, y] = this.getWeekdayLabelCoordinates(dayIndex);\n      const cssClasses = `${\n        this.props.horizontal ? '' : `${CSS_PSEDUO_NAMESPACE}small-text`\n      } ${CSS_PSEDUO_NAMESPACE}weekday-label`;\n      // eslint-disable-next-line no-bitwise\n      return  (\n        <text key={`${x}${y}`} x={x} y={y} className={cssClasses}>\n          {weekdayLabel}\n        </text>\n      );\n    });\n  }\n\n  render() {\n    this.valueCache = this.getValueCache(this.props);\n\n    return (\n      <svg className=\"react-calendar-heatmap\" viewBox={this.getViewBox()}>\n        <g\n          transform={this.getTransformForMonthLabels()}\n          className={`${CSS_PSEDUO_NAMESPACE}month-labels`}\n        >\n          {this.renderMonthLabels()}\n        </g>\n        <g\n          transform={this.getTransformForAllWeeks()}\n          className={`${CSS_PSEDUO_NAMESPACE}all-weeks`}\n        >\n          {this.renderAllWeeks()}\n        </g>\n        <g\n          transform={this.getTransformForWeekdayLabels()}\n          className={`${CSS_PSEDUO_NAMESPACE}weekday-labels`}\n        >\n          {this.renderWeekdayLabels()}\n        </g>\n      </svg>\n    );\n  }\n}\n\nCalendarHeatmap.propTypes = {\n  values: PropTypes.arrayOf(\n    PropTypes.shape({\n      date: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.instanceOf(Date)])\n        .isRequired,\n    }).isRequired,\n  ).isRequired, // array of objects with date and arbitrary metadata\n  numDays: PropTypes.number, // number of days back from endDate to show\n  startDate: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.instanceOf(Date)]), // start of date range\n  endDate: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.instanceOf(Date)]), // end of date range\n  gutterSize: PropTypes.number, // size of space between squares\n  horizontal: PropTypes.bool, // whether to orient horizontally or vertically\n  showMonthLabels: PropTypes.bool, // whether to show month labels\n  showWeekdayLabels: PropTypes.bool, // whether to show weekday labels\n  showOutOfRangeDays: PropTypes.bool, // whether to render squares for extra days in week after endDate, and before start date\n  tooltipDataAttrs: PropTypes.oneOfType([PropTypes.object, PropTypes.func]), // data attributes to add to square for setting 3rd party tooltips, e.g. { 'data-toggle': 'tooltip' } for bootstrap tooltips\n  titleForValue: PropTypes.func, // function which returns title text for value\n  classForValue: PropTypes.func, // function which returns html class for value\n  monthLabels: PropTypes.arrayOf(PropTypes.string), // An array with 12 strings representing the text from janurary to december\n  weekdayLabels: PropTypes.arrayOf(PropTypes.string), // An array with 7 strings representing the text from Sun to Sat\n  onClick: PropTypes.func, // callback function when a square is clicked\n  onMouseOver: PropTypes.func, // callback function when mouse pointer is over a square\n  onMouseLeave: PropTypes.func, // callback function when mouse pointer is left a square\n  transformDayElement: PropTypes.func, // function to further transform the svg element for a single day\n};\n\nCalendarHeatmap.defaultProps = {\n  numDays: null,\n  startDate: dateNDaysAgo(200),\n  endDate: new Date(),\n  gutterSize: 1,\n  horizontal: true,\n  showMonthLabels: true,\n  showWeekdayLabels: false,\n  showOutOfRangeDays: false,\n  tooltipDataAttrs: null,\n  titleForValue: null,\n  classForValue: (value) => (value ? 'color-filled' : 'color-empty'),\n  monthLabels: MONTH_LABELS,\n  weekdayLabels: DAY_LABELS,\n  onClick: null,\n  onMouseOver: null,\n  onMouseLeave: null,\n  transformDayElement: null,\n};\n\nexport default CalendarHeatmap;\n","export function groupBy(rawData, key) {\n    return rawData.reduce(function(previousVal, currentVal) {\n        (previousVal[currentVal[key]] = previousVal[currentVal[key]] || []).push(currentVal);\n        return previousVal;\n    }, {});\n};\n\nexport function msToTime(duration) {\n    if (isNaN(duration))\n        duration = 0;\n    let milliseconds = Math.floor((duration % 1000) / 100),\n        seconds = Math.floor((duration / 1000) % 60),\n        minutes = Math.floor((duration / (1000 * 60)) % 60),\n        hours = Math.floor((duration / (1000 * 60 * 60)) % 24);\n\n    hours = (hours < 10) ? \"0\" + hours : hours;\n    minutes = (minutes < 10) ? \"0\" + minutes : minutes;\n    seconds = (seconds < 10) ? \"0\" + seconds : seconds;\n\n    return hours + \":\" + minutes + \":\" + seconds;\n}\n\nexport function comparator(first, second) {\n    return second[1] - first[1];\n}","import React, {useRef, useEffect, useState} from \"react\";\nimport * as d3 from 'd3';\nimport { groupBy, msToTime, comparator} from \"./helpers\"\n\nconst margin = {\n    top: 15,\n    right: 25,\n    bottom: 15,\n    left: 80\n};\n\nconst w = 450 - margin.left - margin.right;\nconst h = 550 - margin.top - margin.bottom;\n\nexport function updateBar(dataset){\n\n    let yScale = d3.scaleBand()\n        .domain(d3.range(dataset.length))\n        .rangeRound([0, h])\n        .padding(0.05);\n\n    let yScaleTicks = d3.scaleBand()\n        .domain(d3.range(dataset.length))\n        .rangeRound([0, h])\n        .padding(0.05);\n\n    let xScale = d3.scaleLinear()\n        .range([0, w])\n        .domain([0, dataset[0][1]])\n\n    let yAxis = d3.axisLeft(yScaleTicks)\n        .tickFormat(function (d){\n            let artist = dataset[d][0]\n            if (artist.length < 12)\n                return artist\n            else\n                return artist.slice(0, 10) + \"...\"\n        });\n\n    let svg = d3.select(\"#bar-chart\").select(\"svg\")\n\n    svg.selectAll(\".bar\")\n        .data(dataset)\n        .transition()\n        .duration(2000) // 2 seconds\n        .attr(\"x\", function (d) {\n            return w - xScale(d[1])\n        })\n        .attr(\"y\", function (d, i) {\n            return yScale(i)\n        })\n        .attr(\"x\", margin.left)\n        .attr(\"height\", yScale.bandwidth())\n        .attr(\"width\", function (d) {\n            return xScale(d[1]);\n        })\n\n    svg.selectAll(\".y-axis\")\n        .transition()\n        .duration(2500)\n        .call(yAxis)\n}\n\nconst D3BarChart = () => {\n    const data = require(\"./data/StreamingHistoryD.json\");\n    const barChart = useRef()\n    const rawData = data.map(function (elem) {\n        let entry = {}\n        entry.date = elem.endTime.split(\" \")[0];\n        entry.msPlayed = elem.msPlayed;\n        entry.artistName = elem.artistName;\n        return entry;\n    });\n\n\n    let filteredData = Object.values(groupBy(rawData, \"date\"));\n\n    let streamingData = filteredData.map(function (day) {\n        let date = day[0][\"date\"];\n        day = day.reduce(function (prev, cur) {\n            prev.msPlayed = prev.msPlayed + cur.msPlayed;\n            prev.artists[cur.artistName] = (prev.artists[cur.artistName] || 0) + cur.msPlayed;\n            return prev;\n        }, {\"msPlayed\": 0, \"artists\": {}});\n        day.date = date;\n        return day;\n    });\n\n    streamingData = streamingData.map(function (entry) {\n        let artists = Object.keys(entry.artists).map(function (artist) {\n            return [artist, entry.artists[artist]];\n        });\n        entry.artists = (artists.sort(comparator).concat(Array(19).fill([\" \", 0]))).slice(0, 20)\n        return entry\n    })\n\n    let allArtists = rawData.reduce(function (prev, cur) {\n        prev[cur.artistName] = (prev[cur.artistName] || 0) + cur.msPlayed;\n        return prev;\n    }, {})\n\n    allArtists = Object.keys(allArtists).map(function (artist) {\n        return [artist, allArtists[artist]];\n    });\n\n    const top20Artists = allArtists.sort(comparator).slice(0, 20)\n    const [datasetOnClick, changeDataset] = useState(top20Artists)\n\n    console.log(\"chart\", streamingData)\n\n    useEffect(() => {\n        let yScale = d3.scaleBand()\n            .domain(d3.range(top20Artists.length))\n            .rangeRound([0, h])\n            .padding(0.05);\n\n        let yScaleTicks = d3.scaleBand()\n            .domain(top20Artists.map(function (d) { return d[0]; }))\n            .rangeRound([0, h])\n            .padding(0.05);\n\n        let xScale = d3.scaleLinear()\n            .range([0, w])\n            .domain([0, top20Artists[0][1]])\n\n        let yAxis = d3.axisLeft(yScaleTicks)\n            .tickFormat(function (d){\n                if (d.length < 12)\n                    return d\n                else\n                    return d.slice(0, 10) + \"...\"\n            });\n\n        let svg = d3.select(barChart.current)\n            .attr(\"width\", w)\n            .attr(\"height\", h);\n\n        svg.selectAll(\"rect\")\n            .data(top20Artists)\n            // .transition()\n            // .duration(2000)\n            .enter()\n            .append(\"g\")\n            .append(\"rect\")\n            .attr(\"class\", \"bar\")\n            .attr(\"x\", function (d) {\n                return w - xScale(d[1])\n            })\n            .attr(\"y\", function (d, i) {\n                return yScale(i)\n            })\n            .attr(\"x\", margin.left)\n            .attr(\"height\", yScale.bandwidth())\n            .attr(\"width\", function (d) {\n                return xScale(d[1]);\n            })\n            .attr(\"fill\", \"rgb(29,132,192)\")\n\n        svg.append(\"g\")\n            .attr(\"class\",\"y-axis\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",0)\")//magic number, change it at will\n            .call(yAxis);\n\n        let div = d3.select(\"body\").append(\"div\").attr(\"class\", \"toolTip\");\n\n        let bar = svg.selectAll(\".bar\")\n            .data(top20Artists);\n\n        bar.on(\"mousemove\", function(event, d) {\n            d3.select(this).style(\"fill\", \"rgb(19,107,154)\");\n            div.style(\"left\", event.pageX+10+\"px\");\n            div.style(\"top\", event.pageY-25+\"px\");\n            div.style(\"display\", \"inline-block\");\n            div.html((d[0])+\"<br>\"+(msToTime(d[1])));\n        }).on(\"mouseout\", function (d) {\n            d3.select(this).style(\"fill\", \"rgb(29,132,192)\");\n            div.style(\"display\", \"none\");\n        });\n\n        // bar.on(\"click\", function (){\n        //     updateBar(streamingData[Math.floor(Math.random() * 220)].artists);\n        //     console.log(\"click\")\n        // })\n\n    })\n\n    return (\n        <div id=\"bar-chart\">\n            <svg ref={barChart}></svg>\n        </div>\n    )\n}\n\nexport default D3BarChart;","import React, {useRef, useState} from \"react\";\nimport CalendarHeatmap from \"./calendar-heatmap/index\";\nimport ReactTooltip from \"react-tooltip\";\nimport './calendar-heatmap/styles.css';\nimport * as d3 from 'd3';\nimport { groupBy, msToTime, comparator} from \"./helpers\"\nimport {updateBar} from \"./D3BarChart\";\n\nconst ReactCalendarHeatmap = () => {\n    const data = require(\"./data/StreamingHistoryD.json\");\n    const barChart = useRef()\n    const rawData = data.map(function (elem) {\n        let entry = {}\n        entry.date = elem.endTime.split(\" \")[0];\n        entry.msPlayed = elem.msPlayed;\n        entry.artistName = elem.artistName;\n        return entry;\n    });\n\n\n    let filteredData = Object.values(groupBy(rawData, \"date\"));\n\n    let streamingData = filteredData.map(function (day) {\n        let date = day[0][\"date\"];\n        day = day.reduce(function (prev, cur) {\n            prev.count = prev.count + cur.msPlayed;\n            prev.artists[cur.artistName] = (prev.artists[cur.artistName] || 0) + cur.msPlayed;\n            return prev;\n        }, {\"count\": 0, \"artists\": {}});\n        day.date = date;\n        return day;\n    });\n\n    streamingData = streamingData.map(function (entry) {\n        let artists = Object.keys(entry.artists).map(function (artist) {\n            return [artist, entry.artists[artist]];\n        });\n        entry.artists = (artists.sort(comparator).concat(Array(19).fill([\" \", 0]))).slice(0, 20)\n        return entry\n    })\n\n    let allArtists = rawData.reduce(function (prev, cur) {\n        prev[cur.artistName] = (prev[cur.artistName] || 0) + cur.msPlayed;\n        return prev;\n    }, {})\n\n    allArtists = Object.keys(allArtists).map(function (artist) {\n        return [artist, allArtists[artist]];\n    });\n\n    const top20Artists = allArtists.sort(comparator).slice(0, 20)\n    const [datasetOnClick, changeDataset] = useState(top20Artists)\n\n    const startDate = streamingData[1].date;\n    const endDate = streamingData[streamingData.length - 1].date;\n\n\n    const allDates = d3.timeDays(new Date(startDate), new Date(endDate)).map(function (d){\n        return d.toISOString().split(\"T\")[0]\n    })\n\n    let lookup = new Map(streamingData.map(function (entry){\n            return [entry.date, entry]\n        })\n    );\n\n    allDates.forEach(function (entry){\n        if (!lookup.has(entry)){\n            lookup.set(entry, {\"count\": 0, \"artists\": [], \"date\": entry})\n        }\n    })\n\n    streamingData = Array.from(lookup.values());\n\n    const minMax = d3.extent(streamingData, function(d) { return d.count})\n    const binSize = Math.floor((minMax[1] - minMax[0]) / 7)\n    streamingData = streamingData.map(function (entry){\n        entry.color = Math.floor(entry.count / binSize) + 1\n        if (entry.count == 0)\n            entry.color = 0\n        return entry;\n    })\n\n    return(\n        <>\n            <CalendarHeatmap\n                values={streamingData}\n                classForValue={(value) => {\n                    if (!value || value.count == 0) {\n                        return \"color-empty\";\n                    }\n                    return `color-scale-${value.color}`;\n                }}\n                onClick={(value) => {\n                    if (value.count > 0)\n                        updateBar(value.artists)\n                }}\n                startDate={startDate}\n                endDate={endDate}\n                showWeekdayLabels={true}\n                tooltipDataAttrs={value => {\n                    return {\n                        'data-tip': `Listened for ${msToTime(value.count)} on ${value.date}`,\n                    };\n                }}\n            />\n            <ReactTooltip></ReactTooltip>\n        </>\n\n\n    )\n\n}\nexport default ReactCalendarHeatmap;","import './App.css';\nimport ReactCalendarHeatmap from \"./ReactCalendarHeatmap\";\nimport D3BarChart from \"./D3BarChart\";\nimport D3CalendarHeatmap from \"./D3CalendarHeatmap\";\n\nfunction App() {\n    return (\n    <div className=\"App\">\n        <header className=\"App-header\" >\n            <div className=\"App-row-1\">\n                <div className=\"App-column-graph\">\n                    {/*<D3CalendarHeatmap/>*/}\n                </div>\n                <div className=\"App-column-barchart\">\n                    <D3BarChart/>\n                    {/*<ReactBarChart/>*/}\n                </div>\n            </div>\n            <div className=\"App-row-2\">\n                <ReactCalendarHeatmap/>\n                {/*<D3CalendarHeatmap/>*/}\n\n            </div>\n        </header>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}